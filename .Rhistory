)
}
if(RAMP == TRUE) {
mhd.raw.id %>%
select(
obsessive_compulsive_disorders,
obsessive_compulsive_disorders_numeric,
mhd.obsessivecompulsive_disorder_ocd,
mhd.obsessivecompulsive_disorder_ocd_numeric,
mhd.skin_picking_obsessive_compulsive,
mhd.skin_picking_obsessive_compulsive_numeric,
mhd.body_dysmorphic_disorder_bdd,
mhd.body_dysmorphic_disorder_bdd_numeric
)
}
if(GLAD == TRUE | EDGI == TRUE | NBR == TRUE | RAMP == TRUE) {
mhd.raw.id <- mhd.raw.id %>%
mutate(
psychotic_disorders_numeric =
case_when(
mhd.schizophrenia_numeric == "1" ~ 1,
mhd.schizoaffective_disorder_numeric == "1" ~ 1,
mhd.type_psychosis_psychotic_illness_numeric == "1" ~ 1,
(mhd.schizophrenia_numeric == "0" &
(mhd.schizoaffective_disorder_numeric == "0" | is.na(mhd.schizoaffective_disorder_numeric == "0") & #NA included because some cohorts don't have schizoaffective disorder
mhd.type_psychosis_psychotic_illness_numeric == "0") ~ 0)
)
)
mhd.raw.id <- mhd.raw.id %>%
mutate(
psychotic_disorders =
recode_factor(psychotic_disorders_numeric,
"0" = "No psychotic disorder",
"1" = "Psychotic disorder",
missing = NA_character_
)
)
mhd.raw.id %>%
freq(psychotic_disorders)
}
if(GLAD == TRUE | EDGI == TRUE | NBR == TRUE | RAMP == TRUE) {
mhd.raw.id <- mhd.raw.id %>%
mutate(
bipolar_and_schizophrenia_numeric =
case_when(
psychotic_disorders_numeric == 0 &
mhd.mania_hypomania_bipolar_or_manicdepression_numeric == 0 ~ 0,
psychotic_disorders_numeric == 1 &
mhd.mania_hypomania_bipolar_or_manicdepression_numeric == 1 ~ 1,
psychotic_disorders_numeric == 1 &
mhd.mania_hypomania_bipolar_or_manicdepression_numeric == 0 ~ 2,
psychotic_disorders_numeric == 0 &
mhd.mania_hypomania_bipolar_or_manicdepression_numeric == 1 ~ 3
)
)
mhd.raw.id <- mhd.raw.id %>%
mutate(
bipolar_and_schizophrenia =
recode_factor(bipolar_and_schizophrenia_numeric,
"0" = "No psychotic or bipolar disorder",
"1" = "Psychotic and bipolar disorder",
"2" = "Only psychotic disorder",
"3" = "Only bipolar disorder",
missing = NA_character_
)
)
mhd.raw.id %>%
freq(bipolar_and_schizophrenia,
cumul = F)
}
if(GLAD == TRUE | EDGI == TRUE | NBR == TRUE | RAMP == TRUE) {
mhd.raw.id %>%
select(
psychotic_disorders,
psychotic_disorders_numeric,
bipolar_and_schizophrenia,
bipolar_and_schizophrenia_numeric,
mhd.schizophrenia_numeric,
mhd.schizoaffective_disorder_numeric,
mhd.mania_hypomania_bipolar_or_manicdepression,
mhd.mania_hypomania_bipolar_or_manicdepression_numeric,
mhd.type_psychosis_psychotic_illness_numeric,
mhd.schizophrenia,
mhd.schizoaffective_disorder,
mhd.type_psychosis_psychotic_illness
)
}
if(GLAD == TRUE | EDGI == TRUE | NBR == TRUE | RAMP == TRUE){
mhd.raw.id <- mhd.raw.id %>%
mutate(
autism_spectrum_disorder_numeric =
case_when(
mhd.autism_aspergers_or_autistic_spectrum_disorder_numeric == 0 ~ 0,
mhd.autism_aspergers_or_autistic_spectrum_disorder_numeric == 1 ~ 1
)
)
mhd.raw.id <- mhd.raw.id %>%
mutate(
autism_spectrum_disorder =
recode_factor(
autism_spectrum_disorder_numeric,
`0` = "No autism spectrum disorder",
`1` = "Autism spectrum disorder"
)
)
mhd.raw.id %>%
freq(autism_spectrum_disorder)
}
if(GLAD == TRUE | EDGI == TRUE | NBR == TRUE | RAMP == TRUE) {
mhd.raw.id %>%
select(
autism_spectrum_disorder,
autism_spectrum_disorder_numeric,
mhd.autism_aspergers_or_autistic_spectrum_disorder,
mhd.autism_aspergers_or_autistic_spectrum_disorder_numeric
) %>%
filter(autism_spectrum_disorder == "Autism spectrum disorder")
}
if(GLAD == TRUE | NBR == TRUE | RAMP == TRUE) {
mhd.raw.id <- mhd.raw.id %>%
mutate(
personality_cluster_a_numeric =
case_when(
mhd.personality_disorder_diagnosed_numeric == "1" ~ 1,
mhd.personality_disorder_diagnosed_numeric == "2" ~ 1,
mhd.personality_disorder_diagnosed_numeric == "3" ~ 1,
mhd.personality_disorder_diagnosed_numeric == "4" ~ 0,
mhd.personality_disorder_diagnosed_numeric == "5" ~ 0,
mhd.personality_disorder_diagnosed_numeric == "6" ~ 0,
mhd.personality_disorder_diagnosed_numeric == "7" ~ 0,
mhd.personality_disorder_diagnosed_numeric == "8" ~ 0,
mhd.personality_disorder_diagnosed_numeric == "9" ~ 0,
mhd.personality_disorder_diagnosed_numeric == "10" ~ 0,
mhd.personality_disorder_numeric == "0" ~ 0
)
)
mhd.raw.id <- mhd.raw.id %>%
mutate(
personality_cluster_a =
recode_factor(personality_cluster_a_numeric,
"0" = "No personality disorder cluster A",
"1" = "Personality disorder cluster A",
missing = NA_character_
)
)
mhd.raw.id %>%
freq(personality_cluster_a,
cumul = F)
}
if(GLAD == TRUE | NBR == TRUE | RAMP == TRUE) {
mhd.raw.id %>%
select(
personality_cluster_a,
personality_cluster_a_numeric,
mhd.personality_disorder_diagnosed,
mhd.personality_disorder_diagnosed_numeric
)
}
if(GLAD == TRUE | NBR == TRUE | RAMP == TRUE) {
mhd.raw.id <- mhd.raw.id %>%
mutate(
personality_cluster_b_numeric =
case_when(
mhd.personality_disorder_diagnosed_numeric == "1" ~ 0,
mhd.personality_disorder_diagnosed_numeric == "2" ~ 0,
mhd.personality_disorder_diagnosed_numeric == "3" ~ 0,
mhd.personality_disorder_diagnosed_numeric == "4" ~ 1,
mhd.personality_disorder_diagnosed_numeric == "5" ~ 1,
mhd.personality_disorder_diagnosed_numeric == "6" ~ 1,
mhd.personality_disorder_diagnosed_numeric == "7" ~ 1,
mhd.personality_disorder_diagnosed_numeric == "8" ~ 0,
mhd.personality_disorder_diagnosed_numeric == "9" ~ 0,
mhd.personality_disorder_diagnosed_numeric == "10" ~ 0,
mhd.personality_disorder_numeric == "0" ~ 0
)
)
mhd.raw.id <- mhd.raw.id %>%
mutate(
personality_cluster_b =
recode_factor(personality_cluster_b_numeric,
"0" = "No personality disorder cluster B",
"1" = "Personality disorder cluster B",
missing = NA_character_
)
)
mhd.raw.id %>%
freq(personality_cluster_b,
cumul = F)
}
if(GLAD == TRUE | NBR == TRUE | RAMP == TRUE) {
mhd.raw.id %>%
select(
personality_cluster_b,
personality_cluster_b_numeric,
mhd.personality_disorder_diagnosed,
mhd.personality_disorder_diagnosed_numeric
)
}
if(GLAD == TRUE | NBR == TRUE | RAMP == TRUE) {
mhd.raw.id <- mhd.raw.id %>%
mutate(
personality_cluster_c_numeric =
case_when(
mhd.personality_disorder_diagnosed_numeric == "1" ~ 0,
mhd.personality_disorder_diagnosed_numeric == "2" ~ 0,
mhd.personality_disorder_diagnosed_numeric == "3" ~ 0,
mhd.personality_disorder_diagnosed_numeric == "4" ~ 0,
mhd.personality_disorder_diagnosed_numeric == "5" ~ 0,
mhd.personality_disorder_diagnosed_numeric == "6" ~ 0,
mhd.personality_disorder_diagnosed_numeric == "7" ~ 0,
mhd.personality_disorder_diagnosed_numeric == "8" ~ 1,
mhd.personality_disorder_diagnosed_numeric == "9" ~ 1,
mhd.personality_disorder_diagnosed_numeric == "10" ~ 1,
mhd.personality_disorder_numeric == "0" ~ 0
)
)
mhd.raw.id <- mhd.raw.id %>%
mutate(
personality_cluster_c =
recode_factor(personality_cluster_c_numeric,
"0" = "No personality disorder cluster C",
"1" = "Personality disorder cluster C",
missing = NA_character_
)
)
mhd.raw.id %>%
freq(personality_cluster_c,
cumul = F)
}
if(GLAD == TRUE | NBR == TRUE | RAMP == TRUE) {
mhd.raw.id %>%
select(
personality_cluster_c,
personality_cluster_c_numeric,
mhd.personality_disorder_diagnosed,
mhd.personality_disorder_diagnosed_numeric
)
}
mhd.raw.id <- mhd.raw.id %>%
mutate(
control_numeric =
if_else(
depressive_disorders_numeric == "0" &
anxiety_disorders_numeric == "0" &
eating_disorders_numeric == "0" &
obsessive_compulsive_disorders_numeric == "0" &
psychotic_disorders_numeric == "0" &
mhd.mania_hypomania_bipolar_or_manicdepression_numeric == "0" &
mhd.posttraumatic_stress_disorder_ptsd_numeric == "0" &
autism_spectrum_disorder_numeric == "0" &
mhd.attention_deficit_hyperactivity_disorder_numeric == "0" &
mhd.personality_disorder_numeric == "0",
true = 1,
false = 0,
NA_real_)
)
mhd.raw.id <- mhd.raw.id %>%
mutate(
control =
recode_factor(control_numeric,
"0" = "No control",
"1" = "Control",
missing = NA_character_
)
)
mhd.raw.id %>%
freq(control,
cumul = F)
if(GLAD == TRUE | NBR == TRUE | RAMP == TRUE) {
mhd.raw.id %>%
select(
control,
depressive_disorders_numeric,
anxiety_disorders_numeric,
eating_disorders_numeric,
obsessive_compulsive_disorders_numeric,
psychotic_disorders_numeric,
mhd.mania_hypomania_bipolar_or_manicdepression_numeric,
mhd.posttraumatic_stress_disorder_ptsd_numeric,
autism_spectrum_disorder_numeric,
mhd.attention_deficit_hyperactivity_disorder_numeric,
mhd.personality_disorder_numeric,
)
}
colnames(mhd.raw.id)
mhd.raw.id %>%
select(
control,
none_of_the_above,
none_of_the_above.1
)
mhd.raw.id %>%
select(
control,
mhd.none_of_the_above,
mhd.none_of_the_above.1
)
mhd.raw.id %>%
count(
control,
mhd.none_of_the_above
)
mhd.raw.id %>%
group_by(mhd.none_of_the_above.1)
count(
control,
mhd.none_of_the_above
)
mhd.raw.id %>%
group_by(mhd.none_of_the_above.1) %>%
count(
control,
mhd.none_of_the_above
)
knitr::opts_chunk$set(echo = FALSE,
comment=NA,
prompt=FALSE,
cache=FALSE)
options(bitmapType = 'quartz') # to render fonts better
remove(list = ls())
date = Sys.Date()
#install.packages("summarytools")
#install.packages("tidyverse")
#install.packages("psych")
#install.packages("broom")
#install.packages("skimr")
library(knitr)
library(summarytools)
library(psych)
library(polycor)
library(corrplot)
library(patchwork)
library(broom)
library(tidyverse)
COPINGpalette2 <- c("#78D9C5",
"#F5BE5E")
COPINGpalette3 <- c("#78D9C5",
"#F5BE5E",
"#EEB6E9")
COPINGpalette4 <- c("#78D9C5",
"#F5BE5E",
"#EEB6E9",
"#DBDB73")
COPINGpalette5 <- c("#78D9C5",
"#F5BE5E",
"#EEB6E9",
"#DBDB73",
"#FFED98")
COPINGpalette6 <- c("#78D9C5",
"#F5BE5E",
"#EEB6E9",
"#DBDB73",
"#FFED98",
"#BFD2EB")
COPINGpalette7 <- c("#78D9C5",
"#F5BE5E",
"#EEB6E9",
"#DBDB73",
"#FFED98",
"#BFD2EB",
"#808080")
COPINGpaletteGRAD <- c("#F5BE5E",
"#FFD284",
"#FFEED1",
"#B5B5B5",
"#DEFFF8",
"#94F6E1",
"#78D9C5")
COPINGNeuCenterpalette <- c("#78D9C5",
"#808080",
"#F5BE5E")
RAMPworseGRADpalette <- c("#78D9C5",
"#FFEED1",
"#F5BE5E",
"#FFB1B5")
GLADpalette = c("#efc00b",
"#b7dee8")
palette = COPINGpalette2
#source raw data directory: data.raw_path
source("../PANCHANGE_raw_path.R")
dat.raw <- readRDS(file = paste0(data_path, "/four_cohorts.rds"))
dim(dat.raw)
colnames(dat.raw)
dat.raw %>%
freq(
data_group_gad,
cumul = F)
dat.raw %>%
freq(
data_group_phq,
cumul = F)
dat.raw %>%
freq(
data_group_pcl,
cumul = F)
dat.raw %>%
freq(
data_group_ocir,
cumul = F)
dat.raw %>%
freq(Sample)
dat.raw %>%
freq(age_category)
dat.raw %>%
freq(age_category_numeric)
dat.raw <- dat.raw %>%
mutate(age_category_collapsed_numeric =
case_when(
age_category_numeric == 1 ~ 0,
age_category_numeric == 2 ~ 1,
age_category_numeric == 3 ~ 2,
age_category_numeric == 4 ~ 3,
age_category_numeric == 5 ~ 4,
age_category_numeric == 6 ~ 5,
age_category_numeric == 7 ~ 6,
age_category_numeric == 8 ~ 7,
age_category_numeric == 9 ~ 8,
age_category_numeric == 10 ~ 8,
age_category_numeric == 11 ~ 8,
age_category_numeric == 12 ~ 8,
age_category_numeric == 13 ~ 8
)
)
dat.raw <- dat.raw %>%
mutate(age_category_collapsed =
recode_factor(
age_category_collapsed_numeric,
`0` = "16-18",
`1` = "19-25",
`2` = "26-35",
`3` = "36-45",
`4` = "46-55",
`5` = "56-65",
`6` = "66-70",
`7` = "71-75",
`8` = "76+"
)
)
dat.raw %>%
freq(age_category_collapsed)
dat.raw %>%
freq(Gender)
dat.raw %>%
freq(Gender_numeric)
dat.raw <- dat.raw %>%
mutate(Gender_collapsed_numeric =
case_when(
Gender_numeric == 0 ~ 0,
Gender_numeric == 1 ~ 1,
Gender_numeric == 2 ~ 2,
Gender_numeric == 3 ~ 2
)
)
dat.raw <- dat.raw %>%
mutate(Gender_collapsed =
recode_factor(
Gender_collapsed_numeric,
`0` = "Male",
`1` = "Female",
`2` = "Non-binary/Self-defined"
)
)
dat.raw %>%
freq(Gender_collapsed)
dat.raw %>%
freq(Ethnicity)
dat.raw %>%
freq(Ethnicity_numeric)
dat.raw <- dat.raw %>%
mutate(Ethnicity_collapsed_numeric =
case_when(
Ethnicity_numeric == 1 ~ 0,
Ethnicity_numeric == 2 ~ 1,
Ethnicity_numeric == 3 ~ 2,
Ethnicity_numeric == 4 ~ 3,
Ethnicity_numeric == 5 ~ 3,
Ethnicity_numeric == 6 ~ 4
)
)
dat.raw <- dat.raw %>%
mutate(Ethnicity_collapsed =
recode_factor(
Ethnicity_collapsed_numeric,
`0` = "European",
`1` = "Mixed or multiple ethnic origins",
`2` = "Asian or Asian British",
`3` = "African or African British",
`4` = "Asian or Asian British"
)
)
dat.raw %>%
freq(Ethnicity_collapsed)
dat.2.timepoints <- dat.raw %>%
filter(
(data_group_gad == "Baseline and retrospective data" |
data_group_gad == "Prepandemic and baseline data" |
data_group_gad == "All prepandemic, baseline and retrospective data") |
(data_group_phq == "Baseline and retrospective data" |
data_group_phq == "Prepandemic and baseline data" |
data_group_phq == "All prepandemic, baseline and retrospective data") |
(data_group_pcl == "Baseline and retrospective data" |
data_group_pcl == "Prepandemic and baseline data" |
data_group_pcl == "All prepandemic, baseline and retrospective data") |
(data_group_ocir == "Baseline and retrospective data" |
data_group_ocir == "Prepandemic and baseline data" |
data_group_ocir == "All prepandemic, baseline and retrospective data")
)
dim(dat.2.timepoints)
dat.2.timepoints %>%
select(age_category) %>%
filter(is.na(age_category))
dat <- dat.2.timepoints %>%
