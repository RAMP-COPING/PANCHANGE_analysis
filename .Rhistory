"#EEB6E9",
"#DBDB73")
COPINGpalette5 <- c("#78D9C5",
"#F5BE5E",
"#EEB6E9",
"#DBDB73",
"#FFED98")
COPINGpalette6 <- c("#78D9C5",
"#F5BE5E",
"#EEB6E9",
"#DBDB73",
"#FFED98",
"#BFD2EB")
COPINGpalette7 <- c("#78D9C5",
"#F5BE5E",
"#EEB6E9",
"#DBDB73",
"#FFED98",
"#BFD2EB",
"#808080")
COPINGpaletteGRAD <- c("#F5BE5E",
"#FFD284",
"#FFEED1",
"#B5B5B5",
"#DEFFF8",
"#94F6E1",
"#78D9C5")
COPINGNeuCenterpalette <- c("#78D9C5",
"#808080",
"#F5BE5E")
RAMPworseGRADpalette <- c("#78D9C5",
"#FFEED1",
"#F5BE5E",
"#FFB1B5")
GLADpalette = c("#efc00b",
"#b7dee8")
palette = COPINGpalette2
#source raw data directory: data.raw_path
source("../PANCHANGE_raw_path.R")
dat <- readRDS(file = paste0(data_path, "/four_cohorts.rds"))
dim(dat)
colnames(dat)
dat %>%
freq(
data_group_gad,
cumul = F)
dat %>%
freq(
data_group_phq,
cumul = F)
dat %>%
freq(
data_group_pcl,
cumul = F)
###ADAPT TO CORRECT VARIABLE NAMES
dat.long <- dat.wide %>%
gather(key = "time", value = "score", all_of(PHQ.variables)) %>% #this will be all diagnostic variables
convert_as_factor(ID, time)
knitr::opts_chunk$set(echo = FALSE,
comment=NA,
prompt=FALSE,
cache=FALSE)
options(bitmapType = 'quartz') # to render fonts better
remove(list = ls())
date = Sys.Date()
#install.packages("summarytools")
#install.packages("tidyverse")
#install.packages("psych")
#install.packages("eeptools")
#install.packages("skimr")
library(knitr)
library(summarytools)
library(psych)
library(eeptools) # Needed to calculate age from birthdate
library(tidyverse)
COPINGpalette2 <- c("#78D9C5",
"#F5BE5E")
COPINGpalette3 <- c("#78D9C5",
"#F5BE5E",
"#EEB6E9")
COPINGpalette4 <- c("#78D9C5",
"#F5BE5E",
"#EEB6E9",
"#DBDB73")
COPINGpalette5 <- c("#78D9C5",
"#F5BE5E",
"#EEB6E9",
"#DBDB73",
"#FFED98")
COPINGpalette6 <- c("#78D9C5",
"#F5BE5E",
"#EEB6E9",
"#DBDB73",
"#FFED98",
"#BFD2EB")
COPINGpalette7 <- c("#78D9C5",
"#F5BE5E",
"#EEB6E9",
"#DBDB73",
"#FFED98",
"#BFD2EB",
"#808080")
COPINGpaletteGRAD <- c("#F5BE5E",
"#FFD284",
"#FFEED1",
"#B5B5B5",
"#DEFFF8",
"#94F6E1",
"#78D9C5")
COPINGNeuCenterpalette <- c("#78D9C5",
"#808080",
"#F5BE5E")
RAMPworseGRADpalette <- c("#78D9C5",
"#FFEED1",
"#F5BE5E",
"#FFB1B5")
GLADpalette = c("#efc00b",
"#b7dee8")
palette = COPINGpalette2
#source raw data directory: data.raw_path
source("../PANCHANGE_raw_path.R")
dat <- readRDS(file = paste0(data_path, "/four_cohorts.rds"))
dim(dat)
colnames(dat)
dat %>%
freq(
data_group_gad,
cumul = F)
dat %>%
freq(
data_group_phq,
cumul = F)
dat %>%
freq(
data_group_pcl,
cumul = F)
###ADAPT TO CORRECT VARIABLE NAMES
dat.long <- dat.wide %>%
gather(key = "time", value = "score", all_of(PHQ.variables)) %>% #this will be all diagnostic variables
convert_as_factor(ID, time)
disorder_columns <- c(
"depressive_disorders_numeric",
"anxiety_disorders_numeric",
"eating_disorders_numeric",
"obsessive_compulsive_disorders_numeric",
"psychotic_disorders_numeric",
"mhd.mania_hypomania_bipolar_or_manicdepression_numeric",
"mhd.posttraumatic_stress_disorder_ptsd_numeric",
"mhd.autism_aspergers_or_autistic_spectrum_disorder_numeric",
"mhd.attention_deficit_hyperactivity_disorder_numeric",
"mhd.personality_disorder_numeric"
)
dat.long <- dat %>%
gather(
key = "Disorder",
value = "Diagnosis",
all_of(disorder_columns)) %>% #this will be all diagnostic variables
convert_as_factor(ID, time)
dat.long <- dat %>%
gather(
key = "Disorder",
value = "Diagnosis",
all_of(disorder_columns))
dat.long <- dat %>%
gather(
key = "Disorder",
value = "Diagnosis",
all_of(disorder_columns))
head(dat.long)
colnames(dat.long)
dat.long <- dat %>%
gather(
key = "Disorder",
value = "Diagnosis",
all_of(disorder_columns)) %>%
select(
ID,
Sample,
Disorder,
Diagnosis
)
head(dat.long)
dat.long %>%
group_by(Disorder) %>%
count()
dat.long %>%
group_by(Disorder) %>%
summarise(count = n())
dat.long %>%
group_by(Disorder) %>%
summarise(count = n()) %>%
ungroup()
dat.long %>%
group_by(Disorder) %>%
tally()
dat.long %>%
count(Disorder)
dat.long %>%
filter(Diagnosis == 1) %>%
count(Disorder)
dat.long %>%
filter(Diagnosis == 1) %>%
group_by(Sample) %>%
count(Disorder)
dat.long %>%
filter(Diagnosis == 1) %>%
group_by(Disorder, Sample) %>%
count(Disorder)
dat.long <- dat %>%
gather(
key = "Disorder",
value = "Diagnosis",
all_of(disorder_columns)) %>%
select(
ID,
Sample,
Gender,
Disorder,
Diagnosis
)
head(dat.long)
dat.long %>%
filter(Diagnosis == 1) %>%
group_by(Disorder, Gender) %>%
count(Disorder)
dat.long <- dat %>%
gather(
key = "Disorder",
value = "Diagnosis",
all_of(disorder_columns)) %>%
select(
ID,
Sample,
Gender,
Ethnicity,
Disorder,
Diagnosis
)
head(dat.long)
dat.long %>%
group_by(Ethnicity, Sample) %>%
count(Ethnicity)
dat.long %>%
filter(Ethnicity == 1) %>%
group_by(Ethnicity, Sample) %>%
count(Ethnicity)
dat.long %>%
#  filter(Ethnicity == 1) %>%
group_by(Ethnicity, Sample) %>%
count(Ethnicity)
dat.long %>%
filter(Diagnosis == 1) %>%
group_by(Disorder, Ethnicity) %>%
count(Disorder)
dat %>%
group_by(Sample) %>%
count(Ethnicity)
dat %>%
group_by(Ethnicity, Sample) %>%
count(Ethnicity)
dat %>%
group_by(Gender, Sample) %>%
count(Gender)
dat %>%
group_by(Education, Sample) %>%
count(Education)
dat %>%
group_by(highest_education, Sample) %>%
count(highest_education)
dat %>%
group_by(key_worker, Sample) %>%
count(key_worker)
dat %>%
group_by(respiratory.throat_swab_coronavirus_nose, Sample) %>%
count(respiratory.throat_swab_coronavirus_nose)
dat %>%
group_by(respiratory.throat_swab_test_nose, Sample) %>%
count(respiratory.throat_swab_test_nose)
dat %>%
group_by(respiratory.results_antibody_test, Sample) %>%
count(respiratory.results_antibody_test)
dat %>%
group_by(covid_probable_case_incl_screening, Sample) %>%
count(covid_probable_case_incl_screening)
dat %>%
select(contains("diff")) %>%
colnames()
dat %>%
select(contains("diff_score")) %>%
colnames()
diff_score_cols <- dat %>%
select(contains("diff_score")) %>%
colnames()
diff_score_cols
dat.long <- dat %>%
gather(
key = "Disorder",
value = "Diagnosis",
all_of(disorder_columns)) %>%
select(
ID,
Sample,
Gender,
Ethnicity,
all_of(diff_score_cols),
Disorder,
Diagnosis
)
head(dat.long)
dat.long %>%
filter(Disorder == 1) %>%
summarise(mean = mean(gad.diff_score_base_retro))
dat.long %>%
filter(Disorder == 1) %>%
group_by(Disorder) %>%
summarise(mean = mean(gad.diff_score_base_retro))
dat.long %>%
filter(Disorder == 1) %>%
group_by(Disorder) %>%
summarise(mean = mean(gad.diff_score_base_retro, na.rm = T))
dat.long %>%
filter(Disorder == 1) %>%
group_by(Disorder
dat.long %>%
dat.long %>%
filter(Diagnosis == 1) %>%
group_by(Disorder) %>%
summarise(mean = mean(gad.diff_score_base_retro, na.rm = T))
dat.long %>%
filter(Diagnosis == 1) %>%
group_by(Disorder) %>%
summarise(
gad_base_retro = mean(gad.diff_score_base_retro, na.rm = T),
gad_prepan_retro = mean(gad.diff_score_prepan_retro, na.rm = T),
gad_prepan_base = mean(gad.diff_score_prepan_base, na.rm = T),
)
dat.long %>%
filter(Diagnosis == 1) %>%
group_by(Disorder) %>%
summarise(
gad_base_retro = mean(gad.diff_score_base_retro, na.rm = T),
gad_prepan_retro = mean(gad.diff_score_prepan_retro, na.rm = T),
gad_prepan_base = mean(gad.diff_score_prepan_base, na.rm = T),
phq_base_retro = mean(phq.diff_score_base_retro, na.rm = T),
phq_prepan_retro = mean(phq.diff_score_prepan_retro, na.rm = T),
phq_prepan_base = mean(phq.diff_score_prepan_base, na.rm = T)
)
dat %>%
ggplot(mapping = aes(y = gad.diff_score_prepan_base))
dat %>%
ggplot(mapping = aes(y = gad.diff_score_prepan_base)) +
geom_bar()
library(knitr)
library(summarytools)
library(psych)
library(patchwork)
library(tidyverse)
gad.diff_score_prepan_base_plot <- dat %>%
ggplot(mapping = aes(y = gad.diff_score_prepan_base)) +
geom_bar()
gad.diff_score_prepan_retro_plot <- dat %>%
ggplot(mapping = aes(y = gad.diff_score_prepan_retro)) +
geom_bar()
gad.diff_score_prepan_base_plot <- dat %>%
ggplot(mapping = aes(y = gad.diff_score_prepan_base)) +
geom_bar()
gad.diff_score_prepan_base_plot /
plot_age /
gad.diff_score_prepan_base_plot +
plot_layout(guides = "collect", heights = c(1,1,1)) +
plot_annotation(tag_levels = "A")
gad.diff_score_prepan_base_plot /
gad.diff_score_prepan_retro /
gad.diff_score_prepan_base +
plot_layout(guides = "collect", heights = c(1,1,1)) +
plot_annotation(tag_levels = "A")
gad.diff_score_prepan_base_plot <- dat %>%
ggplot(mapping = aes(y = gad.diff_score_prepan_base)) +
geom_bar()
gad.diff_score_prepan_retro_plot <- dat %>%
ggplot(mapping = aes(y = gad.diff_score_prepan_retro)) +
geom_bar()
gad.diff_score_prepan_base_plot <- dat %>%
ggplot(mapping = aes(y = gad.diff_score_prepan_base)) +
geom_bar()
gad.diff_score_prepan_base_plot /
gad.diff_score_prepan_retro_plot /
gad.diff_score_prepan_base_plot +
plot_layout(guides = "collect", heights = c(1,1,1)) +
plot_annotation(tag_levels = "A")
gad.diff_score_prepan_base_plot /
gad.diff_score_prepan_retro_plot /
gad.diff_score_prepan_base_plot +
plot_layout(guides = "collect", heights = c(1,1,1)) +
plot_annotation(tag_levels = "A")
gad.diff_score_prepan_base_plot /
gad.diff_score_prepan_retro_plot /
gad.diff_score_prepan_base_plot +
plot_layout(guides = "collect", heights = c(1,1,1)) +
plot_annotation(tag_levels = "A")
gad.diff_score_prepan_base_plot <- dat %>%
ggplot(mapping = aes(y = gad.diff_score_prepan_base)) +
geom_bar() +
theme_classic()
gad.diff_score_prepan_retro_plot <- dat %>%
ggplot(mapping = aes(y = gad.diff_score_prepan_retro)) +
geom_bar()
gad.diff_score_prepan_base_plot <- dat %>%
ggplot(mapping = aes(y = gad.diff_score_prepan_base)) +
geom_bar()
gad.diff_score_prepan_base_plot /
gad.diff_score_prepan_retro_plot /
gad.diff_score_prepan_base_plot +
plot_layout(guides = "collect", heights = c(1,1,1)) +
plot_annotation(tag_levels = "A")
gad.diff_score_prepan_base_plot <- dat %>%
ggplot(mapping = aes(y = gad.diff_score_prepan_base)) +
geom_bar() +
theme_classic()
gad.diff_score_prepan_retro_plot <- dat %>%
ggplot(mapping = aes(y = gad.diff_score_prepan_retro)) +
geom_bar()
gad.diff_score_prepan_base_plot <- dat %>%
ggplot(mapping = aes(y = gad.diff_score_prepan_base)) +
geom_bar()
gad.diff_score_prepan_base_plot /
gad.diff_score_prepan_retro_plot /
gad.diff_score_prepan_base_plot +
plot_layout(guides = "collect", heights = c(1,1,1)) +
plot_annotation(tag_levels = "A")
gad.diff_score_prepan_base_plot <- dat %>%
ggplot(mapping = aes(y = gad.diff_score_prepan_base)) +
geom_bar() +
theme_minimal()
gad.diff_score_prepan_retro_plot <- dat %>%
ggplot(mapping = aes(y = gad.diff_score_prepan_retro)) +
geom_bar() +
theme_minimal()
gad.diff_score_prepan_base_plot <- dat %>%
ggplot(mapping = aes(y = gad.diff_score_prepan_base)) +
geom_bar() +
theme_minimal()
gad.diff_score_prepan_base_plot /
gad.diff_score_prepan_retro_plot /
gad.diff_score_prepan_base_plot +
plot_layout(guides = "collect", heights = c(1,1,1)) +
plot_annotation(tag_levels = "A")
model0 <- lm(
formula = gad.diff_score_base_retro ~ Disorder,
data = dat)
model0 <- lm(
formula = gad.diff_score_base_retro ~ Disorder,
data = dat.long)
tidy(model0)
library(knitr)
library(summarytools)
library(psych)
library(patchwork)
library(broom)
library(tidyverse)
model0 <- lm(
formula = gad.diff_score_base_retro ~ Disorder,
data = dat.long)
tidy(model0)
summary(model0)
model0 <- lm(
formula = gad.diff_score_base_retro ~ Disorder,
data = dat.long)
summary(model0)
colnames(dat)
model1 <- lm(
formula = gad.diff_score_base_retro ~ Gender + Age + Ethnicity + Cohort,
data = dat)
summary(model1)
model1 <- lm(
formula = gad.diff_score_base_retro ~ Gender + Age + Ethnicity + Cohort + time_diff_sign_up_coping,
data = dat)
summary(dat$time_diff_sign_up_coping)
str(dat$time_diff_sign_up_coping)
class(dat$time_diff_sign_up_coping)
model1 <- lm(
formula = gad.diff_score_base_retro ~ time_diff_sign_up_coping,
data = dat)
summary(model1)
model1 <- lm(
formula = gad.diff_score_base_retro ~ Gender + Age + Ethnicity + Cohort + time_diff_sign_up_coping,
data = dat)
model1 <- lm(
formula = gad.diff_score_base_retro ~ Gender + Age + Ethnicity + time_diff_sign_up_coping,
data = dat)
summary(model1)
model1 <- lm(
formula = gad.diff_score_base_retro ~ Gender + Age + Ethnicity + time_diff_sign_up_coping + Cohort,
data = dat)
model1 <- lm(
formula = gad.diff_score_base_retro ~ Gender + Age + Ethnicity + time_diff_sign_up_coping + Sample,
data = dat)
summary(model1)
dat.long %>%
filter(Diagnosis == 1) %>%
group_by(Disorder) %>%
summarise(
gad_base_retro = mean(gad.diff_score_base_retro, na.rm = T),
gad_prepan_retro = mean(gad.diff_score_prepan_retro, na.rm = T),
gad_prepan_base = mean(gad.diff_score_prepan_base, na.rm = T),
phq_base_retro = mean(phq.diff_score_base_retro, na.rm = T),
phq_prepan_retro = mean(phq.diff_score_prepan_retro, na.rm = T),
phq_prepan_base = mean(phq.diff_score_prepan_base, na.rm = T),
ocir_base_retro = mean(ocir.diff_score_base_retro, na.rm = T),
ocir_prepan_retro = mean(ocir.diff_score_prepan_retro, na.rm = T),
ocir_prepan_base = mean(ocir.diff_score_prepan_base, na.rm = T)
)
